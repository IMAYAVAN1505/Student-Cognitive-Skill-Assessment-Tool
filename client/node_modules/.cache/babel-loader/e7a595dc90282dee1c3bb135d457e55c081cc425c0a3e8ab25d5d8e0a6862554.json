{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import'./ProfileDropdown.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function profilePath(role){if(role==='admin')return'/admin/profile';if(role==='teacher')return'/teacher/profile';return'/dashboard/profile';}export default function ProfileDropdown(){var _user$name,_user$assignedSubject;const{user,logout}=useAuth();const navigate=useNavigate();const[open,setOpen]=useState(false);const ref=useRef(null);useEffect(()=>{function handleClickOutside(e){if(ref.current&&!ref.current.contains(e.target))setOpen(false);}document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);const handleLogout=()=>{logout();setOpen(false);navigate('/');};const initials=(user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.split(' ').map(n=>n[0]).join('').toUpperCase().slice(0,2))||'?';return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-dropdown\",ref:ref,children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"profile-trigger\",onClick:()=>setOpen(!open),\"aria-expanded\":open,\"aria-haspopup\":\"true\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile-avatar\",children:initials}),/*#__PURE__*/_jsx(\"span\",{className:\"profile-name\",children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsx(\"span\",{className:\"profile-chevron\",children:\"\\u25BC\"})]}),open&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-menu card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-menu-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"profile-menu-avatar\",children:initials}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-menu-name\",children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-menu-email\",children:user===null||user===void 0?void 0:user.email}),((user===null||user===void 0?void 0:user.rollNumber)||(user===null||user===void 0?void 0:user.course))&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-menu-meta\",children:[(user===null||user===void 0?void 0:user.rollNumber)&&/*#__PURE__*/_jsxs(\"span\",{children:[\"Roll: \",user.rollNumber]}),((user===null||user===void 0?void 0:user.course)||(user===null||user===void 0?void 0:user.department))&&/*#__PURE__*/_jsx(\"span\",{children:[user.course,user.department].filter(Boolean).join(' • ')})]}),(user===null||user===void 0?void 0:user.role)==='teacher'&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-menu-meta profile-menu-subjects\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Assigned subjects:\"}),' ',user!==null&&user!==void 0&&(_user$assignedSubject=user.assignedSubjects)!==null&&_user$assignedSubject!==void 0&&_user$assignedSubject.length?user.assignedSubjects.map(s=>(s===null||s===void 0?void 0:s.name)||s).filter(Boolean).join(', '):'None']})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-menu-actions\",children:[/*#__PURE__*/_jsx(Link,{to:profilePath(user===null||user===void 0?void 0:user.role),className:\"profile-menu-item\",onClick:()=>setOpen(false),children:\"Edit profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"profile-menu-item logout\",onClick:handleLogout,children:\"Logout\"})]})]})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","profilePath","role","ProfileDropdown","_user$name","_user$assignedSubject","user","logout","navigate","open","setOpen","ref","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","handleLogout","initials","name","split","map","n","join","toUpperCase","slice","className","children","type","onClick","email","rollNumber","course","department","filter","Boolean","assignedSubjects","length","s","to"],"sources":["C:/Users/imaya/OneDrive/Desktop/project 2/client/src/components/ProfileDropdown.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport './ProfileDropdown.css';\r\n\r\nfunction profilePath(role) {\r\n  if (role === 'admin') return '/admin/profile';\r\n  if (role === 'teacher') return '/teacher/profile';\r\n  return '/dashboard/profile';\r\n}\r\n\r\nexport default function ProfileDropdown() {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [open, setOpen] = useState(false);\r\n  const ref = useRef(null);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(e) {\r\n      if (ref.current && !ref.current.contains(e.target)) setOpen(false);\r\n    }\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    setOpen(false);\r\n    navigate('/');\r\n  };\r\n\r\n  const initials = user?.name?.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2) || '?';\r\n\r\n  return (\r\n    <div className=\"profile-dropdown\" ref={ref}>\r\n      <button\r\n        type=\"button\"\r\n        className=\"profile-trigger\"\r\n        onClick={() => setOpen(!open)}\r\n        aria-expanded={open}\r\n        aria-haspopup=\"true\"\r\n      >\r\n        <span className=\"profile-avatar\">{initials}</span>\r\n        <span className=\"profile-name\">{user?.name}</span>\r\n        <span className=\"profile-chevron\">▼</span>\r\n      </button>\r\n      {open && (\r\n        <div className=\"profile-menu card\">\r\n          <div className=\"profile-menu-header\">\r\n            <span className=\"profile-menu-avatar\">{initials}</span>\r\n            <div>\r\n              <div className=\"profile-menu-name\">{user?.name}</div>\r\n              <div className=\"profile-menu-email\">{user?.email}</div>\r\n              {(user?.rollNumber || user?.course) && (\r\n                <div className=\"profile-menu-meta\">\r\n                  {user?.rollNumber && <span>Roll: {user.rollNumber}</span>}\r\n                  {(user?.course || user?.department) && (\r\n                    <span>{[user.course, user.department].filter(Boolean).join(' • ')}</span>\r\n                  )}\r\n                </div>\r\n              )}\r\n              {user?.role === 'teacher' && (\r\n                <div className=\"profile-menu-meta profile-menu-subjects\">\r\n                  <strong>Assigned subjects:</strong>{' '}\r\n                  {(user?.assignedSubjects?.length\r\n                    ? user.assignedSubjects.map(s => s?.name || s).filter(Boolean).join(', ')\r\n                    : 'None')}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"profile-menu-actions\">\r\n            <Link to={profilePath(user?.role)} className=\"profile-menu-item\" onClick={() => setOpen(false)}>\r\n              Edit profile\r\n            </Link>\r\n            <button type=\"button\" className=\"profile-menu-item logout\" onClick={handleLogout}>\r\n              Logout\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}